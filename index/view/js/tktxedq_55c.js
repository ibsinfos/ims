/*1369030188,173217599*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ORM70"]); }

__d("ComposerXEmptyAttachment",["Class","ComposerXAttachment","copyProperties"],function(a,b,c,d,e,f){var g=b('Class'),h=b('ComposerXAttachment'),i=b('copyProperties');function j(k,l){this.parent.construct(this);this._root=k;if(l)this.attachmentClassName=l;}g.extend(j,h);i(j.prototype,{getRoot:function(){return this._root;}});e.exports=j;});
__d("ComposerXDatepickerIconReset",["CSS","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('cx');function i(j){g.removeClass(j.element,"_4_na");g.removeClass(j.element,"_509o");}e.exports=i;});
__d("FileUploadTarget",["AsyncUploadRequest","DragDropFileUpload","DragDropTarget","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('AsyncUploadRequest'),h=b('DragDropFileUpload'),i=b('DragDropTarget'),j=b('copyProperties'),k=b('emptyFunction');function l(m,n){var o=(function(p){var q=new g(n).setFiles({file:p}).setRelativeTo(m).setStatusElement(m);q.subscribe('complete',function(r,s){this.onCompleteCallback(s);}.bind(this));q.send();}).bind(this);this.dragDropTarget=new i(m).setOnFilesDropCallback(function(p){p.length&&this.asyncProcess(p,function(q){q.length&&o(q);});}.bind(this));this.asyncProcess=function(p,q){q(p);};this.preprocess=function(p){return p;};this.onCompleteCallback=k;}j(l.prototype,{setPreprocessor:function(m){this.preprocess=m;return this;},setAsyncProcessor:function(m){this.asyncProcess=m;return this;},onComplete:function(m){this.onCompleteCallback=m;return this;},activate:function(){if(!h.isSupported())return;this.dragDropTarget.setFileFilter(this.preprocess).enable();}});e.exports=l;});
__d("SinglePictureUploadTarget",["Bootloader","Dialog","ErrorDialog","FileUploadTarget","copyProperties","emptyFunction","htmlSpecialChars","tx"],function(a,b,c,d,e,f){var g=b('Bootloader'),h=b('Dialog'),i=b('ErrorDialog'),j=b('FileUploadTarget'),k=b('copyProperties'),l=b('emptyFunction'),m=b('htmlSpecialChars'),n=b('tx');function o(p,q){this.fileUploadTarget=new j(p,q);this.preprocessCallback=l;this.oncompleteCallback=l;this.afterSuccessCallback=l;this.maxWidth=null;this.maxHeight=null;}k(o.prototype,{setPreprocessCallback:function(p){this.preprocessCallback=p;return this;},setOncompleteCallback:function(p){this.oncompleteCallback=p;return this;},setAfterSuccessCallback:function(p){this.afterSuccessCallback=p;return this;},setMaximumDimensions:function(p,q){this.maxWidth=p;this.maxHeight=q;return this;},activate:function(){var p=function(t){return m(t.name);},q=(function(t){if(t.length>1){i.show("Upload Error",n._("You can only select {max-photos} photos to upload to this album.  Only the first {max-photos} photo you selected will be uploaded.",{'max-photos':1}));t=[t[0]];}var u=t[0];if(!u.type.match(/^image\//)){i.show("Upload Error",n._("We could not understand the contents of {filename}.  Make sure it is a jpg, gif, or png formatted image.",{filename:p(u)}));return [];}this.preprocessCallback(t);return t;}).bind(this),r=(function(t,u){var v=1024*1024*16,w=1024*1024*1,x=function(z){if(z.size>v){i.show("Upload Error",n._("{filename} is too large. Please resize your photo to under\n                     8000x8000 pixels and try again.",{filename:p(t[0])}));u([]);}else u([z]);},y=t[0];if((y.size<w)||(!this.maxWidth&&!this.maxHeight)){x(y);}else g.loadModules(['ImageExif','ImageResizer'],function(z,aa){if(!aa.isSupported()){x(y);return;}var ba=new aa(y,this.maxWidth,this.maxHeight);ba.subscribe('resized',function(ca,da){if(da.size>y.size){x(y);}else x(da);}.bind(this));ba.subscribe('error',function(){x(y);}.bind(this));z.readFromFile(y,function(ca){ca&&ba.setOrientation(ca.Orientation);ba.resize();});});}).bind(this),s=(function(t){var u=t[0];this.oncompleteCallback(u);var v=u.getResponse().getPayload();if(u.isSuccess()){this.afterSuccessCallback(v);}else if(v&&v.__dialog){var w=new h();w._setFromModel(v.__dialog);w.setButtons(h.OK).show();}else i.show(v.error.title,v.error.body);}).bind(this);return this.fileUploadTarget.onComplete(s).setPreprocessor(q).setAsyncProcessor(r).activate();}});e.exports=o;});
__d("ProfilePOPAlbumEducationDialog",["Event","AsyncRequest"],function(a,b,c,d,e,f){var g=b('Event'),h=b('AsyncRequest'),i={listen:function(j,k){g.listen(j,'click',function(){k.show();new h().setURI('/ajax/profile/picture/record_seen_nux/').send();});}};e.exports=i;});
__d("TimelineAggregatePost",["event-extensions","AsyncRequest","DataStore","DOM","Parent","ScrollableArea","Style","cx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AsyncRequest'),h=b('DataStore'),i=b('DOM'),j=b('Parent'),k=b('ScrollableArea'),l=b('Style'),m=b('cx'),n={init:function(o){Event.listen(o,'click',function(p){var q=p.getTarget();if(p.isDefaultRequested()||q.tagName==='A'||j.byClass(q,"_1ww"))return true;var r=j.byTag(q,'li'),s=h.get(r,'url');g.bootstrap(s,r);});},initPage:function(o){Event.listen(o,'click',function(p){var q=j.byClass(p.getTarget(),'uiCloseButton');if(q)return;var r=j.byTag(p.getTarget(),'li');new g().setURI(h.get(r,'url')).send();});},poke:function(o){k.poke(o);},setScrollHeight:function(o){var p=i.find(o,'.sArea');l.set(p,'height',o.offsetHeight+'px');}};e.exports=n;});
__d("legacy:TimelineAggregatePost",["TimelineAggregatePost"],function(a,b,c,d){a.TimelineAggregatePost=b('TimelineAggregatePost');},3);
__d("TimelineCommentsLoader",["Event","CommentPrelude","CSS","DOM","Parent","emptyFunction"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CommentPrelude'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('emptyFunction'),m={init:function(){m.init=l;g.listen(document.body,'click',function(n){var o=k.byClass(n.getTarget(),'fbTimelineFeedbackCommentLoader');if(o){n.kill();h.click(o,false);var p=k.byTag(o,'form'),q=j.scry(p,'li.uiUfiViewAll input');if(!q.length)q=j.scry(p,'li.fbUfiViewPrevious input');if(!q.length)q=j.scry(p,'a.UFIPagerLink');q[0].click();i.show(j.find(p,'li.uiUfiComments'));i.removeClass(o,'fbTimelineFeedbackCommentLoader');}});}};e.exports=m;});
__d("TimelineProfilePic",["Arbiter","CSS","Dialog","DOM","HTML","Run","$","ge","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('Dialog'),j=b('DOM'),k=b('HTML'),l=b('Run'),m=b('$'),n=b('ge'),o=b('copyProperties');function p(q,r,s,t){p.destroyInstance();p._instance=this;this.leavingMessage=r;this.elemID=s||'fbProfileCover';this.elemClass=t||'.profilePicThumb';this._arbiterTokens=[g.subscribe(q.LOADING,this.startLoading.bind(this)),g.subscribe(q.SUCCESS,this.onUploadSuccess.bind(this))];l.onBeforeUnload(this.onBeforeUnload.bind(this));l.onLeave(this.destroy.bind(this));}o(p,{_instance:null,destroyInstance:function(){this._instance&&this._instance.destroy();}});o(p.prototype,{_setLoadingIndicator:function(q){this._loading=q;h.conditionClass(m(this.elemID),'profilePicLoading',q);},destroy:function(){this._arbiterTokens.forEach(function(q){q.unsubscribe();});this._arbiterTokens=[];p._instance=null;},startLoading:function(q,r){this._setLoadingIndicator(r.isLoading);},onUploadSuccess:function(q,r){this._setLoadingIndicator(false);var s=i.getCurrent();if(s)s.hide();j.replace(j.find(m(this.elemID),this.elemClass),k(r.newPic));if(typeof(r.profileId)!==undefined&&typeof(r.headerPicURL)!==undefined){var t=n('profile_pic_header_'+r.profileId);if(t)t.src=r.headerPicURL;}if(n('fbProfilePicSelector'))h.removeClass(m('fbProfilePicSelector'),'fbTimelineNullProfilePicSelector');},onBeforeUnload:function(){if(p._instance===this&&this._loading)return this.leavingMessage;}});e.exports=p;});
__d("timeline-cover-dragdrop-edit",["SinglePictureUploadTarget","TimelineCover"],function(a,b,c,d,e,f){var g=b('SinglePictureUploadTarget'),h=b('TimelineCover'),i=function(){var m=h.getInstance();m.hideLoadingIndicator();},j=function(m){var n=h.getInstance(),o=m.id,p=m.photo_html;n.updateCoverImage(o,p);},k=function(m){h.getInstance().showLoadingIndicator();},l=function(m,n,o,p){new g(m,n).setMaximumDimensions(o,p).setPreprocessCallback(k).setOncompleteCallback(i).setAfterSuccessCallback(j).activate();};f.initialize_timeline_cover_drop_target=l;});
__d("TimelineCapsule",["Arbiter","CSS","DataStore","DOM","DOMQuery","DOMScroll","Parent","TimelineConstants","TimelineLegacySections","UserAgent","Vector","$","createArrayFrom","csx","isEmpty","queryThenMutateDOM","requestAnimationFrame"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DataStore'),j=b('DOM'),k=b('DOMQuery'),l=b('DOMScroll'),m=b('Parent'),n=b('TimelineConstants'),o=b('TimelineLegacySections'),p=b('UserAgent'),q=b('Vector'),r=b('$'),s=b('createArrayFrom'),t=b('csx'),u=b('isEmpty'),v=b('queryThenMutateDOM'),w=b('requestAnimationFrame'),x=(function(){var y=45,z=15,aa='use',ba='update',ca={},da={};function ea(ra){return h.hasClass(ra,'fbTimelineBalancer');}function fa(ra){return ra.getAttribute('data-spine');}function ga(ra){return h.hasClass(ra,'placeholderUnit');}function ha(ra,sa){if(sa)return (i.get(n.DS_SIDEORG,ra.id)||ra.getAttribute('data-side'));return ra.getAttribute('data-side');}var ia=function(ra,sa){if(p.ie()<=6){ia=function(ta,ua){i.set(n.DS_SIDEORG,ta.id,ha(ta,true));ta.setAttribute('data-side',ua);h.removeClass(ta,'leftColumn');h.removeClass(ta,'rightColumn');h.addClass(ta,ua=='l'?'leftColumn':'rightColumn');};}else ia=function(ta,ua){i.set(n.DS_SIDEORG,ta.id,ha(ta,true));ta.setAttribute('data-side',ua);};ia(ra,sa);};function ja(ra){return ra.getAttribute('data-size');}function ka(ra){if(h.hasClass(ra,'fbTimelineOneColumn')&&ra.prevSibling&&h.hasClass(ra.prevSibling,'fbTimelineOneColumn'))return z*2;if(h.hasClass(ra,'fbTimelineIndeterminateContent'))return 0;return z;}function la(ra,sa){var ta=0;if(h.shown(ra)&&!h.hasClass(ra,'placeholderUnit'))if(sa===aa){ta=i.get(n.DS_HEIGHT,ra.id,null);if(ta===null)ta=ra.getAttribute('data-calculatedheight');}else ta=ra.offsetHeight+ka(ra);if(sa===aa&&ta===null)ta=300;i.set(n.DS_HEIGHT,ra.id,parseInt(ta,10));}function ma(ra){var sa=i.get(n.DS_HEIGHT,ra.id,null);return sa;}function na(ra,sa){if(ja(sa)=='2'){return 0;}else if(ha(sa)=='r'){return ra+ma(sa);}else return ra-ma(sa);}function oa(ra){k.scry(ra,"._3ram").forEach(function(sa){var ta=sa.getAttribute('data-endmarker'),ua=sa.getAttribute('data-pageindex'),va=function(){if(!sa.parentNode)return;i.set(n.DS_LOADED,ra.id,ua);j.remove(sa);g.inform(n.SECTION_FULLY_LOADED,{scrubberKey:ta,pageIndex:ua,capsuleID:ra.id,childCount:ra.childNodes.length});};if(o.get(ta)){va();}else var wa=g.subscribe(n.SECTION_REGISTERED,function(xa,ya){if(ya.scrubberKey===ta){va();wa.unsubscribe();}});});g.inform('TimelineCapsule/balanced',{capsule:ra});}function pa(ra){if(u(ca[ra.id]))return;var sa=ea(ra)?ra.firstChild:ra,ta=sa.childNodes.length,ua={},va={},wa,xa=z,ya=z,za,ab=[];for(var bb=0;bb<ta;bb++){wa=sa.childNodes[bb];if(h.hasClass(wa,'fbTimelineUnit')){za=k.scry(wa,'div.timelineUnitContainer')[0];if(za)va[wa.id]=za.getAttribute('data-time');if(!ga(wa)&&h.shown(wa)){if(ja(wa)=='2'){ua[wa.id]=Math.max(xa,ya);xa=ya=ua[wa.id]+ma(wa);}else if(ha(wa)=='r'){ua[wa.id]=ya;ya+=ma(wa);}else{ua[wa.id]=xa;xa+=ma(wa);}if(ha(wa,true)=='l'||ja(wa)=='2')ab.push(wa.id);}}}for(bb=0;bb<ab.length-1;++bb){var cb=ab[bb],db=ab[bb+1],eb=ua[cb]+y,fb=ua[db];for(var gb in ca[ra.id]){if(eb>fb)break;var hb=ca[ra.id][gb];if(h.shown(hb))continue;if(va[gb]<=va[cb]&&va[gb]>va[db]){hb.style.top=eb+"px";eb+=y;h.show(hb);}}}}function qa(ra,sa){var ta=m.byAttribute(ra,'data-size');if(ta){if(h.hasClass(ra.parentNode,'timelineReportContent')){sa(ra);}else sa(ta);x.balanceCapsule(m.byClass(ta,'fbTimelineCapsule'));}}return {removeUnit:function(ra){qa(ra,function(sa){j.remove(sa);});},hideUnit:function(ra){qa(ra,function(sa){h.addClass(sa,'fbTimelineColumnHidden');});},undoHideUnit:function(ra,sa){j.remove(m.byClass(sa,'hiddenText'));qa(ra,function(ta){h.removeClass(ta,'fbTimelineColumnHidden');});},unplacehold:function(ra){var sa=r(ra);sa.style.top=null;h.removeClass(sa,'visiblePlaceholder');h.removeClass(sa,'placeholder');var ta=m.byClass(sa,'fbTimelineCapsule');delete ca[ta.id][ra];x.balanceCapsule(ta);},scrollToCapsule:function(ra){if(!da.hasOwnProperty(ra.id)){var sa=q.getElementPosition(ra.parentNode);l.scrollTo(new q(q.getScrollPosition().x,sa.y-n.SUBSECTION_SCROLL_TO_OFFSET,'document'));da[ra.id]=true;}},balanceCapsuleFromChild:function(ra,sa){x.balanceCapsule(m.byClass(ra,'fbTimelineCapsule'),sa);},balanceCapsuleDeferred:function(ra,sa){x.balanceCapsule.curry(ra,sa).defer();},balanceCapsule:function(ra,sa){if(!ra||!ra.childNodes)return;var ta=0,ua,va=document.createDocumentFragment(),wa=[],xa=[],ya=[],za=false,ab=sa&&sa.heights_action;if(sa&&sa.tail_balance)i.set(n.DS_TAILBALANCE,ra.id,sa.tail_balance);if(ab!==ba&&(p.chrome()||p.webkit()))h.toggleClass(ra,'webkitFix');for(var bb=0;bb<ra.childNodes.length;bb++){ua=ra.childNodes[bb];if(fa(ua)){continue;}else if(ea(ua)){s(ua.firstChild.childNodes).forEach(function(jb){la(jb,ab);});continue;}la(ua,ab);if(ha(ua,true)=='r'){xa.push(ua);}else wa.push(ua);ya.push(ua);if(ja(ua)!='2')if((ta>0&&ha(ua)=='r')||(ta<0&&ha(ua)=='l'))za=true;ta=na(ta,ua);}var cb=[],db=[],eb=[];k.scry(ra,'li.fbTimelineBalancer').forEach(function(jb){var kb=s(jb.firstChild.childNodes);if(jb.getAttribute('data-nonunits')){eb=eb.concat(kb);}else if(ha(jb)=='left'){cb=cb.concat(kb);}else if(ha(jb)=='right')db=db.concat(kb);});if(za){ra.style.minHeight=ra.offsetHeight;wa.forEach(function(jb){if(ja(jb)!='2')ia(jb,'l');});xa.forEach(function(jb){if(ja(jb)!='2')ia(jb,'r');});var fb=j.create('li',{className:'fbTimelineBalancer'},j.create('ol',null,wa));fb.setAttribute('data-side','left');j.prependContent(ra,fb);cb=wa.concat(cb);var gb=j.create('li',{className:'fbTimelineBalancer'},j.create('ol',null,xa));gb.setAttribute('data-side','right');j.prependContent(ra,gb);db=xa.concat(db);ta=0;}while(eb.length)va.appendChild(eb.shift());while((ta>=0&&cb.length)||(ta<0&&db.length)){if(ta>=0){ua=cb.shift();}else ua=db.shift();va.appendChild(ua);ta=na(ta,ua);}ra.appendChild(va);k.scry(ra,'li.fbTimelineBalancer').forEach(function(jb){if(!jb.firstChild.childNodes.length)j.remove(jb);});var hb=(sa&&sa.tail_balance)||i.get(n.DS_TAILBALANCE,ra.id);if(hb)ta=x.tailBalance(ra,ta,hb);if(za){ya.forEach(function(jb){if(jb.parentNode!==ra){ra.appendChild(jb);ta=na(ta,jb);}});ra.style.minHeight=null;}var ib=m.byClass(ra,'fbTimelineSection');if(ib)i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,ib.id,ta);ca[ra.id]={};k.scry(ra,'li.placeholderUnit').forEach(function(jb){ca[ra.id][jb.id]=jb;});pa(ra);oa(ra);if(ab===aa){sa.heights_action=ba;w(function(){w(x.balanceCapsule.curry(ra,sa));});}},tailBalance:function(ra,sa,ta){if(!ra)return sa;var ua=[],va=[],wa=[],xa=[];k.scry(ra,'li.fbTimelineBalancer').forEach(function(za){var ab=s(za.firstChild.childNodes);if(za.getAttribute('data-nonunits')){xa=xa.concat(ab);}else if(ha(za)=='left'){va=va.concat(ab);}else if(ha(za)=='right')wa=wa.concat(ab);ua=ua.concat(ab);});if((ta==n.FIXED_SIDE_RIGHT&&va.length)||(ta==n.FIXED_SIDE_LEFT&&wa.length))return sa;var ya=document.createDocumentFragment();if(ua)while(ua.length){if(ta!=n.FIXED_SIDE_NONE)if(ja(ua[0])!='2')if(sa>=0){ia(ua[0],'l');}else ia(ua[0],'r');sa=na(sa,ua[0]);ya.appendChild(ua.shift());}ra.appendChild(ya);k.scry(ra,'li.fbTimelineBalancer').forEach(function(za){if(!za.firstChild.childNodes.length)j.remove(za);});return sa;},loadTwoColumnUnits:function(ra){var sa=r(ra);v(function(){var ta=m.byClass(sa,'fbTimelineSection');if(ta){var ua=k.find(sa,"._3rbf"),va=k.find(sa,"._3rbh"),wa=va.offsetHeight-ua.offsetHeight;i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,ta.id,wa);}},oa.curry(sa));}};})();e.exports=a.TimelineCapsule||x;});
__d("TimelineCapsuleUtilities",["CSS"],function(a,b,c,d,e,f){var g=b('CSS'),h={setFirstUnit:function(i){var j=true;for(var k=0;k<i.childNodes.length;++k){var l=i.childNodes[k];if(l.id.indexOf('tl_unit_')===0)if(j){j=false;g.addClass(l,'firstUnit');}else{g.removeClass(l,'firstUnit');break;}}}};e.exports=h;});
__d("TimelineUnitSelector",["DOMQuery"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h={getUnitsWithTime:function(i){return g.scry(i,'div.timelineUnitContainer').filter(function(j){return (j.parentNode.parentNode===i&&j.getAttribute('data-time'));});}};e.exports=h;});
__d("TimelineComposerUtilities",["Event","Arbiter","Bootloader","CSS","DOM","DOMQuery","Parent","TimelineUnitSelector","Vector","cx","csx"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('Bootloader'),j=b('CSS'),k=b('DOM'),l=b('DOMQuery'),m=b('Parent'),n=b('TimelineUnitSelector'),o=b('Vector'),p=b('cx'),q=b('csx'),r=86400*31,s=86400000,t={listenToSetEstimatedDate:function(u,v){return h.subscribe('ComposerXTimelineTagger/init',function(w,x){if(l.contains(u,x.datePickerElement)){t.setEstimatedDate(x.datePickerInstance,v());x.composerTimelineTagger.switchToTagger('date');}});},listenToSetEstimatedDateOld:function(u,v){return h.subscribe('TimelineBackdatedComposerTagger/initialized',function(event,w){if(w.composer===u)w.date_picker.subscribe('initialized',function(x,y){t.setEstimatedDate(y,v());});});},listenToPublish:function(u,v){if(u.root)u=u.root;return h.subscribe('composer/publish',function(event,w){if(w.composer_id===u.id)i.loadModules(['TimelineStoryPublisher'],function(x){x.publish(w);v&&v();});});},listenToAnotherComposerOpen:function(u,v){return h.subscribe('composer/mutate',function(w,x){if(x!==u)v();});},listenToCancel:function(u,v){return g.listen(u,'click',function(event){if(m.byClass(event.getTarget(),"_306"))v();});},listenToCancelOld:function(u,v){return g.listen(u,'click',function(event){m.byClass(event.getTarget(),'cancelBtn')&&v();});},hidePlaceIfAttachmentsTooTall:function(u){var v=l.find(u,"._2_4"),w=o.getElementDimensions(v).y;if(w>50)j.hide(l.find(v,"._mg"));},hidePlaceIfAttachmentsTooTallOld:function(u){var v=k.find(u,'ul.fbTimelineComposerAttachments'),w=o.getElementDimensions(v).y;if(w>50){var x=m.byTag(k.scry(v,'span.placeAttachment')[0],'li');x&&j.hide(x);}},setEstimatedDate:function(u,v){var w,x;if(v&&j.hasClass(v,'fbTimelineCapsule')){w=v.getAttribute('data-start');x=v.getAttribute('data-end');if(w&&x){var y=new Date(x*1000),z=new Date();if(y>z){u.setDate(z.getFullYear(),z.getMonth()+1,z.getDate());}else if(x-w>2*r){u.setDate(y.getFullYear());}else u.setDate(y.getFullYear(),y.getMonth()+1);}return;}var aa=m.byClass(v,'fbTimelineCapsule');if(aa){w=aa.getAttribute('data-start');x=aa.getAttribute('data-end');var ba=o.getElementPosition(v).y,ca=[x,null],da=[w,null],ea=n.getUnitsWithTime(aa);for(var fa=0;fa<ea.length;fa++){var ga=ea[fa],ha=k.scry(ga.parentNode,'.spinePointer')[0];if(!ha)continue;var ia=o.getElementPosition(ha).y;if(ia<=ba){if(!ca[1]||ia>ca[1])ca=[ga.getAttribute('data-time'),ia];}else if(!da[1]||ia<da[1])da=[ga.getAttribute('data-time'),ia];}if(ca[0]!==null&&da[0]!==null){var ja=Math.round((parseInt(ca[0],10)+parseInt(da[0],10))/2)*1000;ja=Math.min(new Date()-s,ja);u.setDateWithTimestamp(ja);}}},showMLEFlyout:function(u){var v=k.scry(document,'a.fbTimelineSpine').length===0,w=function(x){x.showMLEFlyout(u);};if(v){i.loadModules(['TimelineSpinelessComposer'],w);}else i.loadModules(['TimelineComposer'],w);}};e.exports=t;});
__d("TimelineComposer",["Arbiter","Bootloader","CSS","DOM","Parent","Run","TimelineCapsule","TimelineCapsuleUtilities","TimelineComposerUtilities","$","cx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Run'),m=b('TimelineCapsule'),n=b('TimelineCapsuleUtilities'),o=b('TimelineComposerUtilities'),p=b('$'),q=b('cx'),r;function s(x){if(x.isScheduledPost||x.isOGPost)return;if(!x.streamStory){window.location.reload();return;}if(x.backdatedTime){h.loadModules(['TimelineStoryPublisher'],function(z){z.publish(x);});return;}var y=w.renderCapsuleBasedStory(r,x.streamStory);g.inform('TimelineComposer/on_after_publish',y,g.BEHAVIOR_PERSISTENT);}function t(){var x=k.byClass(r,'fbTimelineTwoColumn');return j.find(x,'.spinePointer');}function u(x){var y=v();i.show(y);var z=x.subscribe('hide',function(){i.hide(y);x.unsubscribe(z);});}function v(){var x=k.byClass(r,'fbTimelineTwoColumn'),y=j.scry(x,'div.composerVeil');if(y.length!==1)y=j.appendContent(x,j.create('div',{className:'composerVeil hidden_elem'}));return y[0];}var w={init:function(x){r=p(x);var y=g.subscribe('composer/publish',function(event,z){if(z.composer_id===r.id)s(z);});l.onLeave(y.unsubscribe.bind(y));if(i.hasClass(r,"_mj")){o.hidePlaceIfAttachmentsTooTall(r);}else o.hidePlaceIfAttachmentsTooTallOld(r);},showMLEFlyout:function(x){x.setContext(t()).show();u(x);},renderCapsuleBasedStory:function(x,y){var z=k.byClass(x,'fbTimelineCapsule');if(!z)return;var aa=k.byClass(x,'timelineUnitContainer').parentNode;if(aa.nextSibling.getAttribute('data-spine'))aa=aa.nextSibling;var ba=j.insertAfter(aa,y)[0];h.loadModules(['Animation'],function(ca){new ca(ba.firstChild).from('backgroundColor','#fff8dd').to('backgroundColor','#fff').duration(2000).ease(ca.ease.both).go();});n.setFirstUnit(z);m.balanceCapsule(z);return ba;}};e.exports=a.TimelineComposer||w;});
__d("TimelineContentLoader",["Event","function-extensions","Arbiter","CSS","DOM","DOMScroll","OnVisible","ScrollingPager","TimelineConstants","TimelineController","TimelineLegacySections","TimelineSmartInsert","TimelineURI","UIPagelet","UserAgent","Vector","$","arrayContains","copyProperties","createArrayFrom","csx","debounce","ge","startsWith","tx","userAction"],function(a,b,c,d,e,f){var g=b('Event');b('function-extensions');var h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('DOMScroll'),l=b('OnVisible'),m=b('ScrollingPager'),n=b('TimelineConstants'),o=b('TimelineController'),p=b('TimelineLegacySections'),q=b('TimelineSmartInsert'),r=b('TimelineURI'),s=b('UIPagelet'),t=b('UserAgent'),u=b('Vector'),v=b('$'),w=b('arrayContains'),x=b('copyProperties'),y=b('createArrayFrom'),z=b('csx'),aa=b('debounce'),ba=b('ge'),ca=b('startsWith'),da=b('tx'),ea=b('userAction'),fa=false,ga=false,ha,ia=null,ja={},ka=[],la=[],ma=[],na={},oa={},pa={},qa={},ra=null,sa=null,ta=false,ua=null;function va(eb,fb,gb,hb,ib){this.node=eb;this.loaded=hb;this.canScrollLoad=true;this.canUnload=fb!=db.RECENT;this.scrubberKey=fb;this.historicUnitCount=ib;this._pageletLoadData=gb;this._expandPageletLoadData={};this.rightColumnFinished=false;}x(va.prototype,{load:function(eb,fb){if(this.loaded)return;var gb=this._pageletLoadData;h.inform(n.SECTION_LOADING,{data:gb,scrubberKey:this.scrubberKey});this.loaded=true;i.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.node,'fbTimelineTimePeriodSuppressed');var hb='ProfileTimelineSectionPagelet',ib=this.scrubberKey==db.WAY_BACK;if(ib)hb='ProfileTimelineRemainingYearsPagelet';gb.time_cutoff=db.getTimeCutoff();gb.highlight_unit_data=eb;gb.parent_key=this.parentKey;gb.force_no_friend_activity=ta;i.addClass(this.node,'fbTimelineSectionLoading');if(gb.combine_sections)i.addClass(this.node,'combinedSections');if(this.canUnload&&ga){var jb=this.node.firstChild.cloneNode(true);i.hide(jb);j.insertAfter(this.node,jb);}else this.canScrollLoad=false;var kb=null;if(fb&&!mb){var lb=this.node;lb.style.minHeight=window.innerHeight+"px";kb=function(){lb.style.minHeight=null;};}var mb=gb.combine_sections&&ib;pa[this.scrubberKey]=s.loadFromEndpoint(hb,mb?gb.unit_container_id+'_left':this.node.id,gb,{usePipe:true,jsNonblock:true,constHeight:true,append:mb,finallyHandler:kb});cb(this.scrubberKey);},preload:function(){i.addClass(this.node,'fbTimelineTimePeriodSuppressed');i.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');var eb=j.find(this.node,'span.sectionLabel');if(eb.getAttribute('data-original-label')){j.setContent(eb,eb.getAttribute('data-original-label'));eb.removeAttribute('data-original-label');}},unload:function(){if(!this.loaded||!this.canUnload)return;this.loaded=false;pa[this.scrubberKey]&&pa[this.scrubberKey].cancel();i.addClass(this.node,'fbTimelineTimePeriodUnexpanded');i.removeClass(this.node,'fbTimelineTimePeriodSuppressed');if(this.node.nextSibling&&i.hasClass(this.node.nextSibling,'fbTimelineSection')){j.setContent(this.node,this.node.nextSibling);i.show(this.node.firstChild);}else j.empty(this.node);this.deactivateScrollLoad();},activateScrollLoad:function(){this.canScrollLoad=true;i.removeClass(this.node,'fbTimelineTimePeriodSuppressed');i.addClass(this.node,'fbTimelineTimePeriodUnexpanded');oa[this.scrubberKey]&&oa[this.scrubberKey].reset();},deactivateScrollLoad:function(){if(!this.loaded){this.canScrollLoad=false;i.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');i.addClass(this.node,'fbTimelineTimePeriodSuppressed');oa[this.scrubberKey]&&oa[this.scrubberKey].remove();}},setExpandLoadData:function(eb){this._expandPageletLoadData=eb;return this;},appendData:function(eb){x(this._pageleLoadData,eb);return this;},expandSubSections:function(){if(this.subSections.length)db.navigateToSection(this.subSections[0].scrubberKey);},expand:function(eb){if(!this.loaded)return;sa.add_event('expand_'+this.scrubberKey);var fb=j.find(this.node,'.fbTimelineSectionExpander');i.addClass(fb.firstChild,'async_saving');eb&&i.addClass(eb,'async_saving');this._expandPageletLoadData.time_cutoff=db.getTimeCutoff();db.navigateToSection(this.scrubberKey);j.scry(this.node,'.fbTimelineCapsule').forEach(j.remove);this._expandPageletLoadData.new_expand=true;pa[this.scrubberKey]&&pa[this.scrubberKey].cancel();pa[this.scrubberKey]=s.loadFromEndpoint('ProfileTimelineSectionPagelet',fb.id,this._expandPageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true});},isPermalinkPeriod:function(){return this._pageletLoadData.is_permalink_period;}});function wa(){if(fa)return;o.register(o.CONTENT,db);sa=ea('timeline').uai('init','scrubber',false);fa=true;if(t.ie()<=7)ga=true;}var xa=aa(function(eb,fb,gb){var hb=p.get(eb).historicUnitCount;fb-=hb;gb-=1;if(hb==-1||gb<=0||fb<0)return;var ib=db.getNextSectionKey(eb);if(ib){p.get(ib).load();xa(ib,fb,gb);}},500);function ya(eb,fb,gb,hb){var ib=db.getNextSectionKey(fb);if(ib){oa[ib]=new l(eb,za.curry(ib,eb),false,gb||1000);}else if(fb!==db.WAY_BACK){hb=hb?hb:0;if(hb>80)return null;ya.curry(eb,fb,gb,hb+1).defer(250);}}function za(eb,fb){var gb=p.get(eb);if(gb&&gb.canScrollLoad){sa.add_event("scroll_load_"+eb);if(ga){gb.preload();}else{gb.load();if(ua)xa(eb,ua.required_units,ua.max_parallelism);}fb&&j.remove(fb);}}function ab(){var eb,fb,gb=false;for(var hb=0;hb<ka.length;hb++){var ib=ka[hb];if(!ib)continue;var jb=p.get(ib);if(jb&&(jb.canScrollLoad||jb.loaded)){if(!jb.loaded){i.removeClass(jb.node,'fbTimelineTimePeriodSuppressed');i.addClass(jb.node,'fbTimelineTimePeriodUnexpanded');}if(eb&&fb){bb(eb,fb);if(gb)eb.deactivateScrollLoad();gb=true;}eb=null;fb=null;continue;}else if(eb){fb=jb;jb.deactivateScrollLoad();}else{eb=jb;if(gb)jb.activateScrollLoad();}i.removeClass(jb.node,'fbTimelineTimePeriodSuppressed');i.addClass(jb.node,'fbTimelineTimePeriodUnexpanded');}}function bb(eb,fb){i.removeClass(fb.node,'fbTimelineTimePeriodUnexpanded');i.addClass(fb.node,'fbTimelineTimePeriodSuppressed');var gb=j.find(eb.node,'span.sectionLabel'),hb=j.find(fb.node,'span.sectionLabel');if(!hb.getAttribute('data-original-label'))hb.setAttribute('data-original-label',j.getText(hb));if(gb.getAttribute('data-month')&&hb.getAttribute('data-month')&&gb.getAttribute('data-year')==hb.getAttribute('data-year')){j.setContent(hb,da._("Show {month1} - {month2} {year}",{month1:hb.getAttribute('data-month'),month2:gb.getAttribute('data-month'),year:gb.getAttribute('data-year')}));}else if(gb.getAttribute('data-year')!==hb.getAttribute('data-year')){j.setContent(hb,da._("Show {year1} - {year2}",{year1:hb.getAttribute('data-year'),year2:gb.getAttribute('data-year')}));}else j.setContent(hb,da._("Show {year}",{year:hb.getAttribute('data-year')}));}function cb(eb){if(ga)for(var fb=0;fb<ka.length-1;fb++){var gb=ka[fb];if(!gb)continue;if(gb!=eb){var hb=p.get(gb);if(hb.loaded&&hb.canUnload)hb.unload();}}ab();}var db={WAY_BACK:'way_back',RECENT:'recent',HEADER_SCROLL_CUTOFF:80,CURRENT_SECTION_OFFSET:150,FOOTER_HEIGHT:60,registerTimePeriod:function(eb,fb,gb,hb,ib,jb,kb){wa();if(w(ma,fb))return;if(la)x(gb,la);var lb=new va(eb,fb,gb,hb,kb);if(!ib){ka[jb]=fb;ja[fb]=true;}else{lb.parentKey=ib;p.get(ib).subSections=p.get(ib).subSections||[];p.get(ib).subSections[jb]=lb;}p.set(fb,lb);db.checkCurrentSectionChange();h.inform(n.SECTION_REGISTERED,{scrubberKey:fb});},reset:function(){for(var eb in oa)oa[eb].remove();for(var fb in pa)pa[fb]&&pa[fb].cancel();for(var gb in qa){qa[gb].unsubscribe();delete qa[gb];}ha&&ha.unsubscribe();ha=null;p.removeAll();ia=null;ja={};ka=[];la=[];ma=[];na={};oa={};pa={};ra=null;sa=null;ta=false;fa=false;},checkCurrentSectionChange:function(){var eb=db.getCurrentSection(),fb=ia&&ia.scrubberKey;if(eb&&eb.scrubberKey!==fb&&!eb.isPermalinkPeriod()){ia=eb;var gb=eb.scrubberKey,hb=eb.parentKey;if(!hb){hb=gb;gb=null;}o.sectionHasChanged(hb,gb);}},setTimeCutoff:function(eb){ra=eb;},getTimeCutoff:function(){return ra;},setParallelLoadConfig:function(eb){ua=eb;},getCurrentSection:function(){var eb={},fb=p.getAll();for(var gb in fb){var hb=fb[gb];if(!hb.loaded||na[hb.scrubberKey])continue;var ib=u.getElementPosition(hb.node,'viewport').y;if(hb.scrubberKey=='recent')ib--;if(ib<db.CURRENT_SECTION_OFFSET)eb[ib]=hb;}var jb=Math.max.apply(null,Object.keys(eb)),kb=jb==-Infinity;if(!kb){return eb[jb];}else if(ka[0])return p.get(ka[0]);return null;},capsuleForCurrentSection:function(){var eb=db.getCurrentSection();return eb&&j.scry(eb.node,'.fbTimelineCapsule')[0];},enableScrollLoad:function(eb,fb,gb,hb){eb=v(eb);var ib=j.scry(eb.parentNode,'.fbTimelineCapsule')[0];if(!ib)return;if(gb===null){ya(eb,fb,hb);}else o.runOnceWhenSectionFullyLoaded(ya.curry(eb,fb,hb),fb,gb);},enableScrollLoadOnClick:function(eb,fb,gb){eb=v(eb);g.listen(eb,'click',function(hb){hb.prevent();db.enableScrollLoad(eb,fb,null,gb);});},expandSectionOnClick:function(eb,fb){g.listen(eb,'click',function(gb){gb.prevent();p.get(fb).expand();});},expandSubSectionsOnClick:function(eb,fb){g.listen(eb,'click',function(gb){gb.prevent();p.get(fb).expandSubSections();});},getNextSectionKey:function(eb){for(var fb=0;fb<ka.length-1;fb++)if(ka[fb]==eb){while(fb<ka.length-1&&!ka[fb+1])fb++;return ka[fb+1];}var gb=p.get(eb);if(!gb||!gb.parentKey)return;var hb=p.get(gb.parentKey);if(!hb)return;for(var ib=0;ib<hb.subSections.length-1;ib++)if(hb.subSections[ib].scrubberKey==eb)return hb.subSections[ib+1].scrubberKey;},hideSection:function(eb){var fb=p.get(eb);fb&&i.hide(fb.node);var gb=o.getCurrentScrubber();if(gb){var hb=o.getCurrentScrubber().getNav(eb);hb&&i.hide(hb);}var ib=o.getCurrentStickyHeaderNav();ib&&ib.removeTimePeriod(eb);na[eb]=true;},loadSectionOnClick:function(eb,fb){g.listen(eb,'click',function(gb){gb.prevent();p.get(fb).load();});},removeSection:function(eb){for(var fb in ka)if(ka[fb]==eb){ka[fb]=null;break;}p.remove(eb);delete ja[eb];if(eb in oa){oa[eb].remove();delete oa[eb];}var gb=o.getCurrentStickyHeaderNav();gb&&gb.removeTimePeriod(eb);ma.push(eb);},removeSectionParent:function(eb){j.remove(v(eb).parentNode);},navigateToSection:function(eb,fb,gb){sa.add_event("nav_"+eb);fb=!!fb;var hb=eb,ib=p.get(eb);if(!ib)return;if(!ib.loaded){q.enable();j.scry(v('timeline_tab_content'),'.fbTimelineShowOlderSections').forEach(j.remove);}if(!ja[eb]){ib.node.style.minHeight=u.getViewportDimensions().y+'px';var jb=h.subscribe(n.SECTION_FULLY_LOADED,function(rb,sb){if(sb.scrubberKey===eb){ib.node.style.minHeight='';jb.unsubscribe();}});hb=ib.parentKey;var kb=p.get(hb).node;if(!i.hasClass(kb,'fbTimelineSectionExpanded')){k.scrollTo(kb,0);i.addClass(kb,'fbTimelineSectionExpanded');j.scry(kb,'.fbTimelineCapsule').forEach(j.remove);j.scry(kb,'div.fbTimelineSectionExpandPager').forEach(j.remove);j.scry(kb,'div.fbTimelineContentHeader').forEach(j.remove);j.scry(kb,"._5vf").forEach(function(rb){if(!rb.getAttribute('data-subsection'))j.remove(rb);});}var lb=db.getNextSectionKey(hb);if(lb&&oa[lb])oa[lb].setBuffer(0);}for(var mb=0;mb<ka.length;mb++){var nb=ka[mb];if(!nb)continue;if(nb==hb)break;p.get(nb).deactivateScrollLoad();j.scry(v('timeline_tab_content'),'.fbTimelineSectionExpandPager').forEach(function(rb){var sb=m.getInstance(rb.id);sb&&sb.removeOnVisible();});}db.adjustContentPadding();ib.load(gb,true);ab();var ob=u.getScrollPosition().x,pb=u.getElementPosition(ib.node).y;if(!fb){var qb=ja[eb]?n.SCROLL_TO_OFFSET:n.SUBSECTION_SCROLL_TO_OFFSET;k.scrollTo(new u(ob,pb-qb,'document'),true,false,false,function(){var rb=u.getElementPosition(ib.node).y;k.scrollTo(new u(ob,rb-qb,'document'),false);var sb=j.scry(ib.node,'h3.uiHeaderTitle')[0];if(sb){sb.tabIndex=0;sb.focus();}});}},adjustContentPadding:function(){var eb=ba('timeline_tab_content');if(!eb)return;if(o.isOneColumnMinimal())return;var fb=o.getCurrentKey()||r.TIMELINE_KEY;if(fb!==r.TIMELINE_KEY)return;var gb=ka.length-1,hb=p.get(ka[gb]);eb.style.paddingBottom=hb&&hb.loaded?null:u.getViewportDimensions().y-db.CURRENT_SECTION_OFFSET-db.HEADER_SCROLL_CUTOFF-db.FOOTER_HEIGHT+'px';},adjustContentPaddingAfterLoad:function(eb,fb){o.runOnceWhenSectionFullyLoaded(db.adjustContentPadding,eb,fb);},appendContentAfterLoad:function(eb,fb,gb){o.runOnceWhenSectionFullyLoaded(j.appendContent.curry(v(eb),fb),gb,'0');},markSectionAsLoaded:function(eb,fb,gb){o.runOnceWhenSectionFullyLoaded(function(){ba(eb)&&i.removeClass(v(eb).parentNode,'fbTimelineSectionLoading');},fb,gb);},suppressSectionsAbove:function(eb){var fb,gb;for(var hb=0;hb<ka.length;hb++){var ib=ka[hb];if(!ib)continue;fb=p.get(ib).node;gb=null;if(y(eb.parentNode.children).indexOf(eb)<=y(fb.parentNode.children).indexOf(fb)){gb=ib;break;}p.get(ib).deactivateScrollLoad();}if(gb)db.navigateToSection(gb,true);},forceNoFriendActivity:function(){ta=true;},removeDupes:function(eb){var fb=ba(eb);if(!fb)return;var gb=j.scry(fb,'li.fbTimelineUnit'),hb={};for(var ib=0;ib<gb.length;ib++){var jb=gb[ib];if(jb.id&&ca(jb.id,'tl_unit_')){var kb=jb.id.substring(8,jb.id.length),lb=(jb.getAttribute('data-unit')=='ExperienceSummaryUnit'?jb.getAttribute('data-time'):1);if(hb.hasOwnProperty(kb)&&hb[kb]==lb){jb.id='dupe_unit_'+Math.random();jb.className="hidden_elem";}else hb[kb]=lb;}}},removeLoadingState:function(eb){ba(eb)&&i.removeClass(v(eb),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(eb,fb){var gb=p.get(eb);gb&&gb.setExpandLoadData(fb);},appendSectionDataForAllSections:function(eb){la=eb;for(var fb=0;fb<ka.length-1;fb++){var gb=ka[fb];if(!gb)continue;var hb=p.get(gb);hb&&hb.appendData(eb);}},updatePagerAfterLoad:function(eb,fb,gb,hb,ib){var jb=m.getInstance(eb.firstChild.id);if(!jb){qa[eb.firstChild.id]=h.subscribe(m.REGISTERED,function(kb,lb){qa[eb.firstChild.id].unsubscribe();delete qa[eb.firstChild.id];if(lb.id===eb.firstChild.id)db.updatePagerAfterLoad(eb,fb,gb,hb,ib);});return;}o.runOnceWhenSectionFullyLoaded(function(){i.removeClass(eb,'fbTimelineHiddenPager');jb.checkBuffer();},gb,hb);if(ib)o.runOnceWhenSectionFullyLoaded(o.adjustScrollingPagerBuffer.curry(eb.firstChild.id,fb),gb,hb);},showAfterLoad:function(eb,fb,gb){o.runOnceWhenSectionFullyLoaded(function(){var hb=ba(eb);hb&&i.show(hb);},fb,gb);},repositionDialog:function(eb){h.subscribe(n.SECTION_LOADED,function(){eb.updatePosition();});},rightColumnFinished:function(eb){var fb=p.get(eb);fb.rightColumnFinished=true;}};e.exports=db;});
__d("TimelineLogging",["TimelineController","reportData"],function(a,b,c,d,e,f){var g=b('TimelineController'),h=b('reportData'),i=false,j=0,k=null,l=null,m={init:function(n){if(i)return;j=n;g.register(g.LOGGING,this);},reset:function(){i=false;j=0;k=null;},log:function(n,o){o.profile_id=j;h(n,{gt:o});},logSectionChange:function(n,o){var p={timeline_section_change:1,key:n};if(k&&n==k){p.timeline_scrubber=1;k=null;}if(l&&n==l){p.header_nav=1;l=null;}m.log('timeline',p);},logScrubberClick:function(n){k=n;},logHeaderNavClick:function(n){l=n;}};e.exports=m;});
__d("TimelineStar",["Event","Button","CSS","DOM","Parent","TimelineCapsule","Tooltip","URI","csx","cx","tx"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Button'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('TimelineCapsule'),m=b('Tooltip'),n=b('URI'),o=b('csx'),p=b('cx'),q=b('tx');function r(w){return j.scry(w,"a._5m-")[0];}var s=null,t=[];function u(w){s=s||function(){t.forEach(function(x){x.remove();});t.length=0;};t.push(w);}var v={STAR_CSS_ONLY:1,STAR_ASYNC_REQUIRED:2,ACTION_STAR:7,ACTION_UNSTAR:8,starUnitFromButton:function(w,x,y){m.set(w,"Remove from highlights");var z=k.byClass(w,'timelineUnitContainer');v.starUnit(z,x,y);},starUnit:function(w,x,y){var z=r(w);if(z){i.addClass(w,"_6q0");return;}var aa=w.parentNode;if(!y)j.setContent(aa,x);i.removeClass(aa,'fbTimelineTwoColumn');i.addClass(aa,'fbTimelineOneColumn');aa.removeAttribute('data-side');aa.setAttribute('data-size','2');m.hide();l.balanceCapsule.curry(aa.parentNode).defer();},unstarUnitFromButton:function(w,x,y){m.set(w,"Highlight");var z=k.byClass(w,'timelineUnitContainer');v.unstarUnit(z,x,y);},unstarUnit:function(w,x,y){var z=r(w);if(z){i.removeClass(w,"_6q0");return;}var aa=w.parentNode;if(!y)j.setContent(aa,x);i.removeClass(aa,'fbTimelineOneColumn');i.addClass(aa,'fbTimelineTwoColumn');aa.setAttribute('data-side','l');aa.setAttribute('data-size','1');m.hide();l.balanceCapsule.curry(aa.parentNode).defer();},listenToButton:function(w,x){if(!w)return;switch(x){case v.STAR_CSS_ONLY:u(g.listen(w,'click',function(event){m.set(w,"Loading...");if(i.hasClass(w,'async_saving')){event.preventDefault();return;}var z=i.hasClass(w,"_5m-"),aa=k.byClass(w,'timelineUnitContainer'),ba=new n(w.getAttribute('ajaxify')),ca=ba.getQueryData().customize_action,da=ca==v.ACTION_STAR?v.starUnit:v.unstarUnit;if(z){i.toggleClass(w,"_5m_");}else{h.setEnabled.curry(w,false).defer();i.toggleClass(w,'fbTimelineStarButtonSelected');i.toggleClass(w,'selected');}da(aa,null,true);var ea=ca==v.ACTION_STAR?v.ACTION_UNSTAR:v.ACTION_STAR;ba.addQueryData({customize_action:ea});w.setAttribute.bind(w,'ajaxify',ba).defer();}));var y=k.byClass(w,'stat_elem');y&&i.removeClass(y,'stat_elem');break;case v.STAR_ASYNC_REQUIRED:u(g.listen(w,'click',function(event){m.set(w,"Loading...");}));break;}}};e.exports=v;});
__d("TimelineStickyHeaderComposerX",["Event","Arbiter","Bootloader","CSS","ComposerXController","DOMQuery","Parent","Run","TimelineComposerUtilities","TimelineContentLoader","TimelineStickyHeader","Vector","copyProperties","csx","cx"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('Bootloader'),j=b('CSS'),k=b('ComposerXController'),l=b('DOMQuery'),m=b('Parent'),n=b('Run'),o=b('TimelineComposerUtilities'),p=b('TimelineContentLoader'),q=b('TimelineStickyHeader'),r=b('Vector'),s=b('copyProperties'),t=b('csx'),u=b('cx');function v(x){return x&&m.byClass(x.getContext(),"_2wp");}function w(x){this._composerRoot=x;this._tokens=[o.listenToSetEstimatedDate(this._composerRoot,p.capsuleForCurrentSection),o.listenToPublish(this._composerRoot,this._close.bind(this)),h.subscribe('PhotoSnowlift.OPEN',this._close.bind(this)),h.subscribe('TimelineMLE/mleFlyoutShown',function(y,z){if(v(z)===this._composerRoot)k.reset(this._composerRoot);}.bind(this)),h.subscribe('composer/initializedAttachment',function(y,z){if(z.composerRoot===this._composerRoot){this._registerClickToDismiss();if(!z.isInitial)this._closeMLE();}else this._close();}.bind(this)),h.subscribe(q.ADJUST_WIDTH,this._toggleNarrowMode.bind(this))];this._clickCancelToken=o.listenToCancel(this._composerRoot,this._close.bind(this));n.onLeave(function(){while(this._tokens.length)this._tokens.pop().unsubscribe();this._clearClickDismissToken();if(this._clickCancelToken){this._clickCancelToken.remove();this._clickCancelToken=null;}}.bind(this));}s(w.prototype,{_toggleNarrowMode:function(event,x){i.loadModules(['Tooltip'],function(y){var z=r.getElementDimensions(x).x>400,aa=l.scry(this._composerRoot,"._9lb");j.conditionClass(this._composerRoot,"_2wq",z);for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],da=l.getText(ca);if(z){y.set(ca,da);}else y.remove(ca);}}.bind(this));return false;},_registerClickToDismiss:function(){var x=j.hasClass(l.find(this._composerRoot,"._yq"),"_519b");if(!x){this._clearClickDismissToken();return;}this._clickDismissToken=g.listen(document.body,'click',function(y){var z=m.byClass(y.getTarget(),"_2wp");if(!z){this._close();this._clearClickDismissToken();}}.bind(this));},_clearClickDismissToken:function(){if(this._clickDismissToken){this._clickDismissToken.remove();this._clickDismissToken=null;}},_close:function(){this._clearClickDismissToken();this._closeMLE();k.reset(this._composerRoot);},_closeMLE:function(){i.loadModules(['TimelineMLE'],function(x){var y=x.getFlyout();if(v(y)===this._composerRoot)x.hideFlyout();}.bind(this));}});e.exports=w;});
__d("TimelineSpinelessComposer",["Arbiter","Bootloader","CSS","DOM","Parent","Run","Style","TimelineComposer","TimelineComposerUtilities","$","csx","cx","requestAnimationFrame"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Bootloader'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Run'),m=b('Style'),n=b('TimelineComposer'),o=b('TimelineComposerUtilities'),p=b('$'),q=b('csx'),r=b('cx'),s=b('requestAnimationFrame'),t=false,u,v;function w(ba){if(ba.isScheduledPost||ba.isOGPost)return;if(!ba.streamStory){window.location.reload();return;}if(ba.backdatedTime){h.loadModules(['TimelineStoryPublisher'],function(da){da.publish(ba);});return;}if(t){v.insertBefore(ba.streamStory,v.firstChild);var ca=v.firstChild;i.addClass(ca,("_4jb"));s(m.set.curry(ca,'background','#fff'));}else n.renderCapsuleBasedStory(u,ba.streamStory);}function x(){return j.find(k.byClass(u,'fbTimelineComposerCapsule'),"div._4s3");}function y(ba){var ca=z();i.show(ca);var da=ba.subscribe('hide',function(){i.hide(ca);ba.unsubscribe(da);});}function z(){var ba=k.byClass(u,'fbTimelineComposerCapsule'),ca=j.scry(ba,'div.composerVeil');if(ca.length!==1)ca=j.appendContent(ba,j.create('div',{className:'composerVeil hidden_elem'}));return ca[0];}var aa={init:function(ba,ca){u=ba;t=ca;if(ca)v=j.find(p('pagelet_timeline_left_recent'),"div._6ly");var da=g.subscribe('composer/publish',function(event,ea){if(ea.composer_id===u.id)w(ea);});l.onLeave(da.unsubscribe.bind(da));if(i.hasClass(u,"_mj")){o.hidePlaceIfAttachmentsTooTall(u);}else o.hidePlaceIfAttachmentsTooTallOld(u);},showMLEFlyout:function(ba){ba.setContext(x()).show();y(ba);}};e.exports=aa;});
__d("TimelineStickyRightColumn",["Arbiter","CSS","DOMQuery","Event","PhotoSnowlift","Run","Style","TimelineContentLoader","Vector","UserAgent","csx","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOMQuery'),j=b('Event'),k=b('PhotoSnowlift'),l=b('Run'),m=b('Style'),n=b('TimelineContentLoader'),o=b('Vector'),p=b('UserAgent'),q=b('csx'),r=b('queryThenMutateDOM'),s=100,t=15,u=15,v=71,w=false,x=null,y=null,z,aa,ba,ca,da,ea,fa,ga;function ha(){if(k.getInstance().isOpen)return;z=n.getCurrentSection();if(!z||!z.rightColumnFinished)return;var pa=i.scry(z.node,"._3rbf")[0],qa=i.scry(z.node,"._3rbh")[0];aa=pa?pa.offsetHeight:0;ba=qa?qa.offsetHeight:0;ca=o.getViewportDimensions().y;fa=pa?o.getElementPosition(pa).y:0;ga=document.body.clientWidth<document.body.scrollWidth;}function ia(){if(k.getInstance().isOpen)return;if(y&&y!==z){var pa=i.scry(y.node,"._3rbh")[0];if(pa)ka(pa,'','','');}var qa=i.scry(z.node,"._3rbh")[0];if(!qa)return;if(ga){ka(qa,'','','');return;}if(!z||!z.rightColumnFinished)return;ja(z);y=h.hasClass(qa,'fixed_always')?z:null;}function ja(pa){if(ba>=aa||aa<=ca)return;ea=da;da=o.getScrollPosition().y;var qa,ra=i.scry(pa.node,"._3rbh")[0];if(!ra)return;if(da<=fa-la()){ka(ra,'','','');return;}if(aa+fa<=da+Math.min(ba+la(),ca-u-v)){ka(ra,'absolute','',u+'px');return;}if(ba>ca-u-la()){if(da<ea){var sa=false;if(ra.style.position==='absolute')if(ra.style.top!==''&&da+la()-fa<=parseInt(ra.style.top,10)){sa=true;}else if(ra.style.bottom!==''&&da<=(fa+aa-la())-ba)sa=true;if(sa){ka(ra,'fixed',la()+'px','');return;}else if(ra.style.position==='absolute'&&ra.style.top){return;}else if(h.hasClass(ra,'fixed_always')){if(parseInt(ra.style.top,10)>=la())return;qa=da-fa-(ba-(ca-v));if(ea)qa+=ea-da;ka(ra,'absolute',qa+'px','');return;}}else{var ta=false;if(ra.style.position==='absolute'||(ra.style.position===''&&!h.hasClass(ra,'fixed_always'))){qa=ra.style.top?parseInt(ra.style.top,10):0;if(da+ca>=fa+qa+ba+v)ta=true;}if(ta){qa=ca-ba-u-v;ka(ra,'fixed',qa+'px','');return;}else if(da==ea){return;}else if(h.hasClass(ra,'fixed_always')){if(parseInt(ra.style.top,10)>=la()){qa=da-fa+la();if(ea)qa+=ea-da;ka(ra,'absolute',qa+'px','');return;}}else if(ra.style.position==='absolute')return;}}else ka(ra,'fixed',la()+'px','');}function ka(pa,qa,ra,sa){m.set(pa,'bottom',sa);if(qa==='fixed'){h.addClass(pa,'fixed_always');m.set(pa,'position','');}else{h.removeClass(pa,'fixed_always');m.set(pa,'position',qa);}m.set(pa,'top',ra);g.inform('reflow');}function la(){return h.hasClass(document.documentElement,'tinyViewport')?t:s;}function ma(){r(ha,ia);}function na(){w=false;y=null;while(x.length)x.pop().remove();x=null;}var oa={init:function(){if(w||p.ie()<8)return;w=true;x=[j.listen(window,'scroll',ma),j.listen(window,'resize',ma)];l.onLeave(na);},adjust:function(){if(w){ha();ia();}}};e.exports=oa;});
__d("profile-pic-dragdrop-edit",["Arbiter","SinglePictureUploadTarget","TimelineProfilePic"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('SinglePictureUploadTarget'),i=b('TimelineProfilePic');f.initialize_profile_pic_drop_target=function(j,k,l,m){new i(l,m);new h(j,k).setPreprocessCallback(function(n){g.inform(l.LOADING,{isLoading:1},g.BEHAVIOR_STATE);}).setOncompleteCallback(function(){g.inform(l.LOADING,{isLoading:0},g.BEHAVIOR_STATE);}).setAfterSuccessCallback(function(n){g.inform(l.SUCCESS,{newPic:n.photo_html},g.BEHAVIOR_STATE);}).activate();};});
__d("TypeaheadPreventSubmitOnEnter",["Event","Keys","copyProperties"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Keys'),i=b('copyProperties');function j(k){this._typeahead=k;}i(j.prototype,{_listener:null,enable:function(){var k=this._typeahead.getCore().getElement();this._listener=g.listen(k,'keypress',function(l){if(g.getKeyCode(l)==h.RETURN)l.kill();});},disable:function(){this._listener.remove();this._listener=null;}});e.exports=j;});